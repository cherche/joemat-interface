# joemat-interface

A MATLAB interface to the Joe-s-Special-Matrix-Calc library.

**Note:** In this document, `.*` stands in for one of the shared library
extensions `dll` (Windows), `.so` (Linux), or `.dylib` (macOS).

## Building

Simply `cd` to the project directory and run `make clean` followed by `make shared`.
This produces a library file `libjoemat.*` in `bin/`.

Next, navigate to the project directory and run `generateInterfaceDefinition.m`.
It may be necessary to change the definition of `libFile` to
```m
libFile = "bin/libjoemat.*";
```
to match the path of the library file..

In MATLAB, run `definejoemat.m`. This should produce two files
`definejoemat.m` and `joematData.xml`. Next, run
`build(definejoemat)` to produce the interface file
`joematInterface.*` in `joemat/`.
(The extension is again one of `.dll`, `.so`, or `.dylib`,
depending on your platform.)

## Installing

### Simple single-project installation

As an example, here is how one might install this library and its
interface to a MATLAB project located at `project/`.
Place `libjoemat.*` and `joematInterface.*`
as in the following directory structure:
```
project/
│
└───bin/
│   │   libjoemat.*
│
└───joemat/
    │   joematInterface.*
```
Then place all the files in `mlfunctions/` in the root project directory `project/`,
or simply add `mlfunctions/`, wherever it may be, to the MATLAB path.

### Technical installation

1. Ensure that the library file `libjoemat.*` is
either somewhere in your system's
[run-time library path](https://www.mathworks.com/help/matlab/matlab_external/set-run-time-library-path-for-c-interface.html),
or in `bin/` within your working MATLAB directory.
(Your working MATLAB direcotory is the project folder that
is open when you are running code that uses the interface.)

2. Ensure `joematInterface.*` is in one of the directories
in the MATLAB path. To do this temporairly, run the command
```m
addPath("path/to/joemat-interface/joemat")
```
or set the path from the GUI.

3. Similarly, ensure `mlfunctions/` is in the MATLAB path.

## Usage
Fix a dimension n and denote the type `matrixSeq` corresponding to
horizontal MATLAB arrays consisting of n-by-n MATLAB matrices.
The following four functions are available:
* `getLieAlgebraBasis(matrixSeq generators) -> matrixSeq`
* `getLieAlgebraDim(matrixSeq generators) -> int`
* `getLieAlgebraCentralizer(matrixSeq generators) -> matrixSeq`
* `getLieAlgebraNormalizer(matrixSeq generators) -> matrixSeq`

In each case above, `generators` is a collection of generators
for the Lie algebra for which one wishes to compute the
relevant invariant, e.g., `getLieAlgebraBasis` will return
a basis for the algebra generated by `generators`,
and `getLieAlgebraNormalizer` will return
a basis for the normalizer of the algebra generated by `generators`.

### Direct usage of interface
Technically speaking, the functionality described above is an
abstraction supplied by the functions in `mlfunctions`.
One can equally directly call functions supplied by interface to
the C++ library, wherein the inputs and outputs are
string representations of the corresponding objects.
Such a paradigm may be preferable when the final output
is to be a string, so that string–MATLAB object conversion
is not done unnecessarily.

#### String representations
One must first understand how information is passed between
MATLAB and C++. In fact, the interface almost entirely handles
*string representations* of sequences of matrices
(or sequences of bases of Lie algebras, in the case of series).
This representation **must** satisfy the following to be processed correctly:
* each matrix must be surrounded by a pair of square brackets (`[` and `]`);
* a semicolon `;` separates every two rows of the same matrix;
* a space ` ` separates every two elements of the same row;
* a newline (`"\n"` in C++ or `newline` in MATLAB) separates every two matrices in the basis for the same Lie algebra;
* an at-symbol on its own line (`\n@\n` in C++ or `newline + "@" + newline` in MATLAB) separates every two bases, i.e., separates Lie algebras from one another;
* and there are no additional characters or whitespaces.

Here's a correct string representation of the standard basis for 𝔤𝔩(2,ℂ),
followed by the standard basis for 𝔰𝔩(2,ℂ):
```
[1 0;0 0]
[0 1;0 0]
[0 0;1 0]
[0 0;0 1]
@
[0 1;0 0]
[0 0;1 0]
[1 0;0 -1]
```
Here's an incorrect string representation of the same pair of bases:
```
[1 0; 0 0]
[0 1;0 0]

[0 0;1 0]
[0 0;0 1]
@

[0 1;0 0]
[0 0;1 0]
[1 0;0 -1]
```
#### Functionality available in the interface
The following four functions are available:
* `clib.joemat.getLieAlgebraBasis(str) -> str`
* `clib.joemat.getLieAlgebraDim(str) -> int`
* `clib.joemat.getLieAlgebraCentralizer(str) -> str`
* `clib.joemat.getLieAlgebraNormalizer(str) -> str`

Below is an example use case may be where one wishes both to
determine the size of the centralizer but also print out a basis.
```m
# Matrix sequence of generators
# (a MATLAB array of matrices) is provided
# generators = [...]

# First, convert to a string usable by `clib.joemat`
generatorsString = matrixSeqToString(generators)

# Get a string representation of the centralizer
centString = clib.joemat.getLieAlgebraCentralizer(generatorsString)

# Get a MATLAB array of the centralizer,
# to determine its length (and hence the dimension of the centralizer)
# Technically speaking, it is more efficient to count opening brackets
# in the string, but we will instead convert the string
# to a MATLAB array of matrices for the sake of demonstration
cent = stringToMatrixSeq(centString)
centDim = length(cent)
```
